var we=Object.defineProperty,ke=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var ce=(s,o,n)=>o in s?we(s,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[o]=n,z=(s,o)=>{for(var n in o||(o={}))ue.call(o,n)&&ce(s,n,o[n]);if(J)for(var n of J(o))de.call(o,n)&&ce(s,n,o[n]);return s},W=(s,o)=>ke(s,$e(o));var Y=(s,o)=>{var n={};for(var a in s)ue.call(s,a)&&o.indexOf(a)<0&&(n[a]=s[a]);if(s!=null&&J)for(var a of J(s))o.indexOf(a)<0&&de.call(s,a)&&(n[a]=s[a]);return n};var Z=(s,o,n)=>new Promise((a,l)=>{var r=g=>{try{c(n.next(g))}catch(u){l(u)}},t=g=>{try{c(n.throw(g))}catch(u){l(u)}},c=g=>g.done?a(g.value):Promise.resolve(g.value).then(r,t);c((n=n.apply(s,o)).next())});import{b as Ce,S as he,by as Le,bz as Pe,bA as Be,aL as Re,bB as Se,aI as Me,bC as Te,ap as ye,bD as xe,bE as Ae,ae as Ie,bF as Ee,bG as De,_ as Ve,$ as v,bH as ze,aS as ve,aR as Fe,bI as Oe,bJ as Ne,ai as qe,E as j,L as pe,aY as Ue,bK as fe,bL as We,aJ as G,bM as je,P as Ke,D as Qe,aw as Xe,bN as Ge,bw as He,ag as Je,Q as te,R as Ye}from"./bootstrap-Cgc7XB2T.js";import{d as k,A as b,l as p,s as e,M as se,N as ae,B as f,v as $,k as S,c as x,g as q,C as y,m as P,y as Q,O as le,t as K,u as N,q as F,I as D,x as L,R as ee,S as be,r as _e,w as Ze,V as et,ae as tt,a9 as me,h as H,n as B,H as oe,z as ot,af as nt,ag as st,j as at,ah as lt}from"./index-index-Bdl0SLOG.js";import{T as it}from"./auth-title-Molvckh2.js";import{C as rt,R as ct,a as ut,b as dt,M as pt,c as ft}from"./index-TWdW77eQ.js";import{X as mt,u as gt}from"./use-modal-BUjIGbzo.js";const ht=Ce("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),yt=k({__name:"AlertDialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(s,{emit:o}){const l=he(s,o);return(r,t)=>(p(),b(e(Le),se(ae(e(l))),{default:f(()=>[$(r.$slots,"default")]),_:3},16))}}),vt=k({__name:"AlertDialogAction",props:{asChild:{type:Boolean},as:{}},setup(s){const o=s;return(n,a)=>(p(),b(e(Pe),se(ae(o)),{default:f(()=>[$(n.$slots,"default")]),_:3},16))}}),ge=k({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{}},setup(s){const o=s;return(n,a)=>(p(),b(e(Be),se(ae(o)),{default:f(()=>[$(n.$slots,"default")]),_:3},16))}}),bt={class:"bg-overlay z-popup inset-0"},_t=k({__name:"AlertDialogOverlay",setup(s){return Re(),(o,n)=>(p(),S("div",bt))}}),wt=k({__name:"AlertDialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},centered:{type:Boolean},class:{},modal:{type:Boolean,default:!0},open:{type:Boolean},overlayBlur:{},zIndex:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(s,{expose:o,emit:n}){const a=s,l=n,r=x(()=>{const d=a,{class:u,modal:h,open:C}=d;return Y(d,["class","modal","open"])}),t=he(r,l),c=q(null);function g(u){var h;u.target===((h=c.value)==null?void 0:h.$el)&&(a.open?l("opened"):l("closed"))}return o({getContentRef:()=>c.value}),(u,h)=>(p(),b(e(Se),null,{default:f(()=>[y(Me,{name:"fade",appear:""},{default:f(()=>[u.open&&u.modal?(p(),b(_t,{key:0,style:Q(W(z({},u.zIndex?{zIndex:u.zIndex}:{}),{position:"fixed",backdropFilter:u.overlayBlur&&u.overlayBlur>0?`blur(${u.overlayBlur}px)`:"none"})),onClick:h[0]||(h[0]=()=>l("close"))},null,8,["style"])):P("",!0)]),_:1}),y(e(Te),le({ref_key:"contentRef",ref:c,style:W(z({},u.zIndex?{zIndex:u.zIndex}:{}),{position:"fixed"}),onAnimationend:g},e(t),{class:e(K)("z-popup bg-background p-6 shadow-lg outline-none sm:rounded-xl","data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95",{"data-[state=open]:slide-in-from-top-[48%] data-[state=closed]:slide-out-to-top-[48%]":!u.centered,"data-[state=open]:slide-in-from-top-[98%] data-[state=closed]:slide-out-to-top-[148%]":u.centered,"top-[10vh]":!u.centered,"top-1/2 -translate-y-1/2":u.centered},a.class)}),{default:f(()=>[$(u.$slots,"default")]),_:3},16,["style","class"])]),_:3}))}}),kt=k({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const o=s,n=x(()=>{const t=o,{class:l}=t;return Y(t,["class"])}),a=ye(n);return(l,r)=>(p(),b(e(xe),le(e(a),{class:e(K)("text-muted-foreground text-sm",o.class)}),{default:f(()=>[$(l.$slots,"default")]),_:3},16,["class"]))}}),$t=k({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const o=s,n=x(()=>{const t=o,{class:l}=t;return Y(t,["class"])}),a=ye(n);return(l,r)=>(p(),b(e(Ae),le(e(a),{class:e(K)("text-lg font-semibold leading-none tracking-tight",o.class)}),{default:f(()=>[$(l.$slots,"default")]),_:3},16,["class"]))}}),Ct=k({__name:"spine-text",props:{animationDuration:{default:2},animationIterationCount:{default:"infinite"}},setup(s){const o=x(()=>({animation:`shine ${s.animationDuration}s linear ${s.animationIterationCount}`}));return(n,a)=>(p(),S("div",{style:Q(o.value),class:"vben-spine-text !bg-clip-text text-transparent"},[$(n.$slots,"default")],4))}}),Lt=k({__name:"slider-captcha-action",props:{actionStyle:{},isPassing:{type:Boolean},toLeft:{type:Boolean}},setup(s,{expose:o}){const n=s,a=N("actionRef"),l=q("0"),r=x(()=>{const{actionStyle:c}=n;return W(z({},c),{left:l.value})}),t=x(()=>Number.parseInt(l.value)>10&&!n.isPassing);return o({getEl:()=>a.value,getStyle:()=>{var c;return(c=a==null?void 0:a.value)==null?void 0:c.style},setLeft:c=>{l.value=c}}),(c,g)=>(p(),S("div",{ref_key:"actionRef",ref:a,class:F([{"transition-width !left-0 duration-300":c.toLeft,"rounded-md":t.value},"bg-background dark:bg-accent absolute left-0 top-0 flex h-full cursor-move items-center justify-center px-3.5 shadow-md"]),style:Q(r.value),name:"captcha-action"},[y(e(Ie),{"is-passing":c.isPassing,class:"text-foreground/60 size-4"},{default:f(()=>[$(c.$slots,"icon",{},()=>[c.isPassing?(p(),b(e(De),{key:1})):(p(),b(e(Ee),{key:0}))])]),_:3},8,["is-passing"])],6))}}),Pt=k({__name:"slider-captcha-bar",props:{barStyle:{},toLeft:{type:Boolean}},setup(s,{expose:o}){const n=s,a=N("barRef"),l=q("0"),r=x(()=>{const{barStyle:t}=n;return W(z({},t),{width:l.value})});return o({getEl:()=>a.value,setWidth:t=>{l.value=t}}),(t,c)=>(p(),S("div",{ref_key:"barRef",ref:a,class:F([t.toLeft&&"transition-width !w-0 duration-300","bg-success absolute h-full"]),style:Q(r.value)},null,6))}}),Bt=k({__name:"slider-captcha-content",props:{contentStyle:{},isPassing:{type:Boolean},successText:{},text:{}},setup(s,{expose:o}){const n=s,a=N("contentRef"),l=x(()=>{const{contentStyle:r}=n;return z({},r)});return o({getEl:()=>a.value}),(r,t)=>(p(),S("div",{ref_key:"contentRef",ref:a,class:F([{[r.$style.success]:r.isPassing},"absolute top-0 flex size-full select-none items-center justify-center text-xs"]),style:Q(l.value)},[$(r.$slots,"text",{},()=>[y(e(Ct),{class:"flex h-full items-center"},{default:f(()=>[D(L(r.isPassing?r.successText:r.text),1)]),_:1})])],6))}}),Rt="_success_flyel_2",St={success:Rt},Mt={$style:St},Tt=Ve(Bt,[["__cssModules",Mt]]),xt=k({__name:"index",props:ee({class:{},actionStyle:{default:()=>({})},barStyle:{default:()=>({})},contentStyle:{default:()=>({})},wrapperStyle:{default:()=>({})},isSlot:{type:Boolean,default:!1},successText:{default:""},text:{default:""}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:ee(["end","move","start","success"],["update:modelValue"]),setup(s,{expose:o,emit:n}){const a=s,l=n,r=be(s,"modelValue"),t=_e({endTime:0,isMoving:!1,isPassing:!1,moveDistance:0,startTime:0,toLeft:!1});o({resume:m});const c=N("wrapperRef"),g=N("barRef"),u=N("contentRef"),h=N("actionRef");Ze(()=>t.isPassing,i=>{if(i){const{endTime:R,startTime:T}=t,A=(R-T)/1e3;l("success",{isPassing:i,time:A.toFixed(1)}),r.value=i}}),et(()=>{t.isPassing=!!r.value});function C(i){return"pageX"in i?i.pageX:"touches"in i&&i.touches[0]?i.touches[0].pageX:0}function M(i){t.isPassing||h.value&&(l("start",i),t.moveDistance=C(i)-Number.parseInt(h.value.getStyle().left.replace("px","")||"0",10),t.startTime=Date.now(),t.isMoving=!0)}function d(i){var I,E,O;const R=(E=(I=c.value)==null?void 0:I.offsetWidth)!=null?E:220,T=(O=i==null?void 0:i.offsetWidth)!=null?O:40,A=R-T-6;return{actionWidth:T,offset:A,wrapperWidth:R}}function _(i){const{isMoving:R,moveDistance:T}=t;if(R){const A=e(h),I=e(g);if(!A||!I)return;const{actionWidth:E,offset:O,wrapperWidth:X}=d(A.getEl()),V=C(i)-T;l("move",{event:i,moveDistance:T,moveX:V}),V>0&&V<=O?(A.setLeft(`${V}px`),I.setWidth(`${V+E/2}px`)):V>O&&(A.setLeft(`${X-E}px`),I.setWidth(`${X-E/2}px`),a.isSlot||U())}}function w(i){const{isMoving:R,isPassing:T,moveDistance:A}=t;if(R&&!T){l("end",i);const I=h.value,E=e(g);if(!I||!E)return;const O=C(i)-A,{actionWidth:X,offset:V,wrapperWidth:ie}=d(I.getEl());O<V?a.isSlot?setTimeout(()=>{if(r.value){const re=e(u);re&&(re.getEl().style.width=`${Number.parseInt(E.getEl().style.width)}px`)}else m()},0):m():(I.setLeft(`${ie-X}px`),E.setWidth(`${ie-X/2}px`),U()),t.isMoving=!1}}function U(){if(a.isSlot){m();return}t.endTime=Date.now(),t.isPassing=!0,t.isMoving=!1}function m(){t.isMoving=!1,t.isPassing=!1,t.moveDistance=0,t.toLeft=!1,t.startTime=0,t.endTime=0;const i=e(h),R=e(g),T=e(u);!i||!R||!T||(T.getEl().style.width="100%",t.toLeft=!0,tt(()=>{t.toLeft=!1,i.setLeft("0"),R.setWidth("0")},300))}return(i,R)=>(p(),S("div",{ref_key:"wrapperRef",ref:c,class:F(e(K)("border-border bg-background-deep relative flex h-10 w-full items-center overflow-hidden rounded-md border text-center",a.class)),style:Q(i.wrapperStyle),onMouseleave:w,onMousemove:_,onMouseup:w,onTouchend:w,onTouchmove:_},[y(Pt,{ref_key:"barRef",ref:g,"bar-style":i.barStyle,"to-left":t.toLeft},null,8,["bar-style","to-left"]),y(Tt,{ref_key:"contentRef",ref:u,"content-style":i.contentStyle,"is-passing":t.isPassing,"success-text":i.successText||e(v)("ui.captcha.sliderSuccessText"),text:i.text||e(v)("ui.captcha.sliderDefaultText")},me({_:2},[i.$slots.text?{name:"text",fn:f(()=>[$(i.$slots,"text",{isPassing:t.isPassing})]),key:"0"}:void 0]),1032,["content-style","is-passing","success-text","text"]),y(Lt,{ref_key:"actionRef",ref:h,"action-style":i.actionStyle,"is-passing":t.isPassing,"to-left":t.toLeft,onMousedown:M,onTouchstart:M},me({_:2},[i.$slots.actionIcon?{name:"icon",fn:f(()=>[$(i.$slots,"actionIcon",{isPassing:t.isPassing})]),key:"0"}:void 0]),1032,["action-style","is-passing","to-left"])],38))}}),[lo,At]=ze("VbenAlertContext"),It={class:"flex items-center"},Et={class:"flex-auto"},Dt={class:"m-4 min-h-[30px]"},Vt=k({__name:"alert",props:ee({beforeClose:{},bordered:{type:Boolean,default:!0},buttonAlign:{default:"end"},cancelText:{},centered:{type:Boolean,default:!0},confirmText:{},containerClass:{},content:{},contentClass:{},contentMasking:{type:Boolean},footer:{},icon:{},overlayBlur:{},showCancel:{type:Boolean},title:{}},{open:{type:Boolean,default:!1},openModifiers:{}}),emits:ee(["closed","confirm","opened"],["update:open"]),setup(s,{emit:o}){const n=s,a=o,l=be(s,"open"),{$t:r}=ve(),t=Fe.getComponents(),c=q(!1);function g(){a("closed",c.value),c.value=!1}function u(){c.value=!1}const h=x(()=>{var i;let m=null;if(n.icon){if(typeof n.icon=="string")switch(n.icon){case"error":{m=H(Ne,{style:{color:"hsl(var(--destructive))"}});break}case"info":{m=H(ht,{style:{color:"hsl(var(--info))"}});break}case"question":{m=qe;break}case"success":{m=H(rt,{style:{color:"hsl(var(--success))"}});break}case"warning":{m=H(Oe,{style:{color:"hsl(var(--warning))"}});break}default:{m=null;break}}}else m=(i=n.icon)!=null?i:null;return m});function C(){_(),U(!1)}function M(){d(),U(!1)}At({doCancel:C,doConfirm:M});function d(){c.value=!0,a("confirm")}function _(){c.value=!1}const w=q(!1);function U(m){return Z(this,null,function*(){if(yield ot(),!m&&n.beforeClose){w.value=!0;try{(yield n.beforeClose({isConfirm:c.value}))!==!1&&(l.value=!1)}finally{w.value=!1}}else l.value=m})}return(m,i)=>(p(),b(e(yt),{open:l.value,"onUpdate:open":U},{default:f(()=>[y(e(wt),{open:l.value,centered:m.centered,"overlay-blur":m.overlayBlur,onOpened:i[0]||(i[0]=R=>a("opened")),onClosed:g,onEscapeKeyDown:u,class:F(e(K)(m.containerClass,"left-0 right-0 mx-auto flex max-h-[80%] flex-col p-0 duration-300 sm:w-[520px] sm:max-w-[80%] sm:rounded-[var(--radius)]",{"border-border border":m.bordered,"shadow-3xl":!m.bordered}))},{default:f(()=>[B("div",{class:F(e(K)("relative flex-1 overflow-y-auto p-3",m.contentClass))},[m.title?(p(),b(e($t),{key:0},{default:f(()=>[B("div",It,[(p(),b(oe(h.value),{class:"mr-2"})),B("span",Et,L(e(r)(m.title)),1),m.showCancel?(p(),b(e(ge),{key:0,"as-child":""},{default:f(()=>[y(e(j),{variant:"ghost",size:"icon",class:"rounded-full",disabled:w.value,onClick:_},{default:f(()=>[y(e(mt),{class:"text-muted-foreground size-4"})]),_:1},8,["disabled"])]),_:1})):P("",!0)])]),_:1})):P("",!0),y(e(kt),null,{default:f(()=>[B("div",Dt,[y(e(pe),{content:m.content,"render-br":""},null,8,["content"])]),w.value&&m.contentMasking?(p(),b(e(Ue),{key:0,spinning:w.value},null,8,["spinning"])):P("",!0)]),_:1}),B("div",{class:F(["flex items-center justify-end gap-x-2",`justify-${m.buttonAlign}`])},[y(e(pe),{content:m.footer},null,8,["content"]),m.showCancel?(p(),b(e(ge),{key:0,"as-child":""},{default:f(()=>[(p(),b(oe(e(t).DefaultButton||e(j)),{disabled:w.value,variant:"ghost",onClick:_},{default:f(()=>[D(L(m.cancelText||e(r)("cancel")),1)]),_:1},8,["disabled"]))]),_:1})):P("",!0),y(e(vt),{"as-child":""},{default:f(()=>[(p(),b(oe(e(t).PrimaryButton||e(j)),{loading:w.value,onClick:d},{default:f(()=>[D(L(m.confirmText||e(r)("confirm")),1)]),_:1},8,["loading"]))]),_:1})],2)],2)]),_:1},8,["open","centered","overlay-blur","class"])]),_:1},8,["open"]))}}),ne=q([]),{$t:zt}=ve();function Ft(s,o,n){return new Promise((a,l)=>{var h,C;const r=nt(s)?{content:s}:z({},s),t=document.createElement("div");document.body.append(t);const c={container:t,instance:null},g=W(z({onClosed:M=>{ne.value=ne.value.filter(d=>d!==c),fe(null,t),t.parentNode&&t.remove(),M?a():l(new Error("dialog cancelled"))}},r),{open:!0,title:(h=r.title)!=null?h:zt.value("prompt")}),u=H(Vt,g);fe(u,t),c.instance=(C=u.component)==null?void 0:C.proxy,ne.value.push(c)})}const Ot=k({__name:"dingding-login",props:{clientId:{},corpId:{},redirectUri:{},isQrCode:{type:Boolean}},setup(s){const o=s,n=We(),[a,l]=gt({header:!1,footer:!1,fullscreenButton:!1,class:"w-[302px] h-[302px] dingding-qrcode-login-modal",onOpened(){t()}}),r=()=>{const{redirectUri:g}=o;return g||window.location.origin+n.fullPath},t=()=>Z(null,null,function*(){const{clientId:g,corpId:u}=o;window.DTFrameLogin||(yield st("https://g.alicdn.com/dingding/h5-dingtalk-login/0.21.0/ddlogin.js")),window.DTFrameLogin({id:"dingding_qrcode_login_element",width:300,height:300},{redirect_uri:encodeURIComponent(r()),client_id:g,scope:"openid corpid",response_type:"code",state:"1",prompt:"consent",corpId:u},h=>{const{redirectUrl:C}=h;window.location.href=C},h=>{Ft(`Login Error: ${h}`)})}),c=()=>{const{clientId:g,corpId:u,isQrCode:h}=o;h?l.open():window.location.href=`https://login.dingtalk.com/oauth2/auth?redirect_uri=${encodeURIComponent(r())}&response_type=code&client_id=${g}&scope=openid&corpid=${u}&prompt=consent`};return(g,u)=>(p(),S("div",null,[y(e(G),{onClick:c,tooltip:e(v)("authentication.dingdingLogin"),"tooltip-side":"top"},{default:f(()=>[y(e(ct))]),_:1},8,["tooltip"]),y(e(a),null,{default:f(()=>u[0]||(u[0]=[B("div",{id:"dingding_qrcode_login_element"},null,-1)])),_:1,__:[0]})]))}}),Nt={VITE_GLOB_API_URL:"https://mock-napi.vben.pro/api"},qt={class:"w-full sm:mx-auto md:max-w-md"},Ut={class:"mt-4 flex items-center justify-between"},Wt={class:"text-muted-foreground text-center text-xs uppercase"},jt={class:"mt-4 flex flex-wrap justify-center"},Kt=k({name:"ThirdPartyLogin",__name:"third-party-login",setup(s){const{auth:{dingding:o}}=je(Nt,!0);return(n,a)=>(p(),S("div",qt,[B("div",Ut,[a[0]||(a[0]=B("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1)),B("span",Wt,L(e(v)("authentication.thirdPartyLogin")),1),a[1]||(a[1]=B("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1))]),B("div",jt,[y(e(G),{tooltip:e(v)("authentication.wechatLogin"),"tooltip-side":"top",class:"mb-3"},{default:f(()=>[y(e(ut))]),_:1},8,["tooltip"]),y(e(G),{tooltip:e(v)("authentication.qqLogin"),"tooltip-side":"top",class:"mb-3"},{default:f(()=>[y(e(dt))]),_:1},8,["tooltip"]),y(e(G),{tooltip:e(v)("authentication.githubLogin"),"tooltip-side":"top",class:"mb-3"},{default:f(()=>[y(e(pt))]),_:1},8,["tooltip"]),y(e(G),{tooltip:e(v)("authentication.googleLogin"),"tooltip-side":"top",class:"mb-3"},{default:f(()=>[y(e(ft))]),_:1},8,["tooltip"]),e(o)?(p(),b(Ot,{key:0,"corp-id":e(o).corpId,"client-id":e(o).clientId,class:"mb-3"},null,8,["corp-id","client-id"])):P("",!0)])]))}}),Qt=["onKeydown"],Xt={class:"text-muted-foreground"},Gt={key:0,class:"mb-6 flex justify-between"},Ht={class:"flex-center"},Jt={key:1,class:"mb-2 mt-4 flex items-center justify-between"},Yt={key:0,class:"mt-3 text-center text-sm"},Zt=k({name:"AuthenticationLogin",__name:"login",props:{formSchema:{default:()=>[]},codeLoginPath:{default:"/auth/code-login"},forgetPasswordPath:{default:"/auth/forget-password"},loading:{type:Boolean,default:!1},qrCodeLoginPath:{default:"/auth/qrcode-login"},registerPath:{default:"/auth/register"},showCodeLogin:{type:Boolean,default:!0},showForgetPassword:{type:Boolean,default:!0},showQrcodeLogin:{type:Boolean,default:!0},showRegister:{type:Boolean,default:!0},showRememberMe:{type:Boolean,default:!0},showThirdPartyLogin:{type:Boolean,default:!0},subTitle:{default:""},title:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(s,{expose:o,emit:n}){const a=s,l=n,[r,t]=Ke(_e({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:x(()=>a.formSchema),showDefaultActions:!1})),c=Qe(),g=`REMEMBER_ME_USERNAME_${location.hostname}`,u=localStorage.getItem(g)||"",h=q(!!u);function C(){return Z(this,null,function*(){const{valid:d}=yield t.validate(),_=yield t.getValues();d&&(localStorage.setItem(g,h.value?_==null?void 0:_.username:""),l("submit",_))})}function M(d){c.push(d)}return at(()=>{u&&t.setFieldValue("username",u)}),o({getFormApi:()=>t}),(d,_)=>(p(),S("div",{onKeydown:Ge(He(C,["prevent"]),["enter"])},[$(d.$slots,"title",{},()=>[y(it,null,{desc:f(()=>[B("span",Xt,[$(d.$slots,"subTitle",{},()=>[D(L(d.subTitle||e(v)("authentication.loginSubtitle")),1)])])]),default:f(()=>[$(d.$slots,"title",{},()=>[D(L(d.title||`${e(v)("authentication.welcomeBack")} 👋🏻`),1)])]),_:3})]),y(e(r)),d.showRememberMe||d.showForgetPassword?(p(),S("div",Gt,[B("div",Ht,[d.showRememberMe?(p(),b(e(Xe),{key:0,checked:h.value,"onUpdate:checked":_[0]||(_[0]=w=>h.value=w),name:"rememberMe"},{default:f(()=>[D(L(e(v)("authentication.rememberMe")),1)]),_:1},8,["checked"])):P("",!0)]),d.showForgetPassword?(p(),S("span",{key:0,class:"vben-link text-sm font-normal",onClick:_[1]||(_[1]=w=>M(d.forgetPasswordPath))},L(e(v)("authentication.forgetPassword")),1)):P("",!0)])):P("",!0),y(e(j),{class:F([{"cursor-wait":d.loading},"w-full"]),loading:d.loading,"aria-label":"login",onClick:C},{default:f(()=>[D(L(d.submitButtonText||e(v)("common.login")),1)]),_:1},8,["class","loading"]),d.showCodeLogin||d.showQrcodeLogin?(p(),S("div",Jt,[d.showCodeLogin?(p(),b(e(j),{key:0,class:"w-1/2",variant:"outline",onClick:_[2]||(_[2]=w=>M(d.codeLoginPath))},{default:f(()=>[D(L(e(v)("authentication.mobileLogin")),1)]),_:1})):P("",!0),d.showQrcodeLogin?(p(),b(e(j),{key:1,class:"ml-4 w-1/2",variant:"outline",onClick:_[3]||(_[3]=w=>M(d.qrCodeLoginPath))},{default:f(()=>[D(L(e(v)("authentication.qrcodeLogin")),1)]),_:1})):P("",!0)])):P("",!0),$(d.$slots,"third-party-login",{},()=>[d.showThirdPartyLogin?(p(),b(Kt,{key:0})):P("",!0)]),$(d.$slots,"to-register",{},()=>[d.showRegister?(p(),S("div",Yt,[D(L(e(v)("authentication.accountTip"))+" ",1),B("span",{class:"vben-link text-sm font-normal",onClick:_[4]||(_[4]=w=>M(d.registerPath))},L(e(v)("authentication.createAccount")),1)])):P("",!0)])],40,Qt))}}),io=k({name:"Login",__name:"login",setup(s){const o=Je(),n=[{label:"Super",value:"vben"},{label:"Admin",value:"admin"},{label:"User",value:"jack"}],a=x(()=>[{component:"VbenSelect",componentProps:{options:n,placeholder:v("authentication.selectAccount")},fieldName:"selectAccount",label:v("authentication.selectAccount"),rules:te().min(1,{message:v("authentication.selectAccount")}).optional().default("vben")},{component:"VbenInput",componentProps:{placeholder:v("authentication.usernameTip")},dependencies:{trigger(l,r){if(l.selectAccount){const t=n.find(c=>c.value===l.selectAccount);t&&r.setValues({password:"123456",username:t.value})}},triggerFields:["selectAccount"]},fieldName:"username",label:v("authentication.username"),rules:te().min(1,{message:v("authentication.usernameTip")})},{component:"VbenInputPassword",componentProps:{placeholder:v("authentication.password")},fieldName:"password",label:v("authentication.password"),rules:te().min(1,{message:v("authentication.passwordTip")})},{component:lt(xt),fieldName:"captcha",rules:Ye().refine(l=>l,{message:v("authentication.verifyRequiredTip")})}]);return(l,r)=>(p(),b(e(Zt),{"form-schema":a.value,loading:e(o).loginLoading,onSubmit:e(o).authLogin},null,8,["form-schema","loading","onSubmit"]))}});export{io as _};
